<div class="custom-dropdown-container" (click)="$event.stopPropagation()">
  <div
    class="custom-dropdown-input-wrapper"
    [class.disabled]="isReadonly"
    [class.invalid]="invalidValidator"
  >
    <div class="icons-wrapper">
      <i class="fa-solid fa-magnifying-glass"></i>
      <i class="{{ icon }}"></i>
    </div>

    <input
      #inputField
      autocomplete="nope"
      type="text"
      class="custom-dropdown-input"
      [readonly]="isReadonly"
      [placeholder]="placeholder"
      [(ngModel)]="searchQuery"
      (focus)="onInputFocus()"
      (input)="filterOptions()"
      (keyup)="onQueryChange($event)"
    />

    <button
      class="custom-dropdown-button"
      type="button"
      [class.disabled]="isReadonly"
      (click)="toggleDropdown($event)"
      *ngIf="!isOpen"
    >
      <i class="fa fa-chevron-down"></i>
    </button>

    <button
      class="custom-dropdown-button"
      type="button"
      [class.disabled]="isReadonly"
      (click)="toggleDropdown($event)"
      *ngIf="isOpen"
    >
      <i class="fa fa-chevron-up" style="margin-bottom: 2px"></i>
    </button>
  </div>

  <div
    #dropdownMenu
    class="custom-dropdown-styling"
    [ngClass]="{
      'dropdown-up': dropdownDirection === 'up',
      'dropdown-down': dropdownDirection === 'down'
    }"
    *ngIf="isOpen && filteredOptions.length > 0"
  >
    <div
      class="custom-dropdown-item"
      *ngFor="let option of filteredOptions"
      [class.selected]="option === selectedValue"
      (click)="selectOption(option)"
    >
      <i
        *ngIf="option.icon"
        class="{{ option.icon }}"
        [ngStyle]="{ color: option.color }"
      ></i>

      {{ option[labelField] }}
    </div>
  </div>

  <div
    #dropdownMenu
    class="custom-dropdown-styling"
    [ngClass]="{
      'dropdown-up': dropdownDirection === 'up',
      'dropdown-down': dropdownDirection === 'down'
    }"
    *ngIf="isOpen && filteredOptions.length == 0"
  >
    <div class="custom-dropdown-item">
      <p>{{ semResultado }}</p>
    </div>
  </div>
</div>
